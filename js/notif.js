"use strict";Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(let c=this.length-1;0<=c;c--)this[c]&&this[c].parentElement&&this[c].parentElement.removeChild(this[c])},Array.prototype.sum=function(){return this.reduce(function(c,d){return c+d})};let name="fdsujhfkdshfkj",previousVal="";function generateAverage(){let c=document.getElementById("marksForm:marksWidget:coursesTable_data");if(setTimeout(function(){generateAverage()},200),previousVal!==c.innerHTML){previousVal=c.innerHTML;let d=[],e=0,f=document.getElementsByTagName("body")[0].innerHTML,g=/(j_idt[0-9]+:[0-9]+)"/g,h=g.exec(f);for(;null!=h;)e++,h=g.exec(f);for(let q,o=0,p="ui-widget-content ui-datatable-even odd-row";2>o;o++){q=c.getElementsByClassName(p);for(let r=0;r<q.length;r++){let s=q[r].getElementsByTagName("td"),t=[];for(let u=0;u<e&&0!=s[4+u].innerHTML.length;u++)t.push(parseFloat(s[4+u].innerHTML.replace(",",".")));d.push({name:s[0].getElementsByTagName("span")[0].innerHTML,coef:parseFloat(s[2].innerHTML.replace(",",".")),etcs:parseFloat(s[3].innerHTML.replace(",",".")),cc:t,exam:parseFloat(s[4+e].innerHTML.replace(",",".")),tr:q[r]})}p="ui-widget-content ui-datatable-odd even-row"}let l=0,m=0,n=0;console.log(d);for(let o=0;o<d.length;o++){null!=document.getElementById(name+o)&&document.getElementById(name+o).remove();let p=null;0<d[o].cc.length?(p=d[o].cc.sum()/d[o].cc.length,!isNaN(d[o].exam)&&(p=(p+d[o].exam)/2)):!isNaN(d[o].exam)&&(p=d[o].exam),null==p?d[o].tr.innerHTML+="<td id=\""+(name+o)+"\" role=\"gridcell\" style=\"color:black;width:37px;text-align: center\"></td>":(p=Math.round(100*p)/100,l+=p*d[o].coef,m+=d[o].coef,n+=10<=p?d[o].etcs:0,d[o].tr.innerHTML+="<td id=\""+(name+o)+"\" role=\"gridcell\" style=\"color:black;background-color:"+(10>p?"Red":11>p?"Orange":"Green")+";width:37px;text-align: center\">"+p+"</td>")}null!=document.getElementById(name+"moy")&&document.getElementById(name+"moy").remove(),document.getElementById("marksForm:marksWidget:coursesTable_head").getElementsByTagName("tr")[0].innerHTML+="<th id=\""+name+"moy\" class=\"ui-state-default\" role=\"columnheader\" style=\"width:55px;text-align: center\"><span class=\"ui-column-title\">Moyenne</span></th>",null!=document.getElementById(name+"foot")&&document.getElementById(name+"foot").remove(),document.getElementById("marksForm:marksWidget:coursesTable_foot").innerHTML+="<tr role=\"row\" id=\""+name+"foot\"><th></th><th class=\"ui-state-default\" role=\"columnheader\"><span class=\"ui-column-title\">Moyenne Semestre</span></th><th class=\"ui-state-default\" role=\"columnheader\" style=\"width:100px;\"><span class=\"ui-column-title\">"+(isNaN(Math.round(100*(l/m))/100)?"N.C":Math.round(100*(l/m))/100)+"</span></th><th></th><th class=\"ui-state-default\" role=\"columnheader\" style=\"width:37px;text-align: center\"><span class=\"ui-column-title\">Tot. ECTS</span></th><th class=\"ui-state-default\" role=\"columnheader\" style=\"width:55px;text-align: center\"><span class=\"ui-column-title\">"+n+"</span></th></tr>"}}generateAverage();